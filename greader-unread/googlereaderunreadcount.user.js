
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
 <title>gm-greader-unreadcount - Google Code</title>
 <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
 
 <link type="text/css" rel="stylesheet" href="/hosting/css/d_20080403.css" />
 
 <link type="text/css" rel="stylesheet" href="/hosting/css/d_sb_20080522.css" />
 
 
 
<!--[if IE]>
 <link type="text/css" rel="stylesheet" href="/hosting/css/d_ie.css" />
<![endif]--> 
</head>
<body class="t4">
 <div id=gaia>
  <font size="-1">
 
 <b>angusdev@gmail.com</b>
 
 | <a href="/p/support/wiki/WhatsNew" style="color:#a03">What's new?</a>
 | <a href="/u/angusdev/">Profile</a>
 | <a href="/hosting/settings">Settings</a>
 | <a href="/p/support/">Help</a>
 | <a href="http://www.google.com/accounts/Logout?continue=http%3A%2F%2Fcode.google.com%2Fp%2Fgm-greader-unreadcount%2Fsource%2Fbrowse%2Ftrunk%2Fgooglereaderunreadcount.user.js">Sign out</a>
 
 </font> 

 </div>
 <table style="padding:0px; margin: 0px 0px -6px 0; width:100%" cellpadding=0 cellspacing=0>
 <tr>
 <td style="width:153px"><a href="/"><img src="/hosting/images/code_sm.png" width=153 height=55 alt="Google"/></a></td>
 <td style="padding-left: 1.5em">
 
 <div style="font-size:120%; font-weight: bold">
 <a href="/p/gm-greader-unreadcount/" style="text-decoration:none; color:#000">gm-greader-unreadcount</a>
 </div>
 <div style="font-size:95%; margin-top:3px">
 <i><a href="/p/gm-greader-unreadcount/" style="text-decoration:none; color:#000">Greasemokney to display actual unread count instead of &quot;1000+&quot; in Google Reader</a></i>
 </div>
 
 </td>
 <td style="white-space:nowrap; text-align:right">
 
 <form action="/hosting/search">
 <input size=30 name=q value=""/>
 <input type=submit name=projectsearch value="Search Projects" />
 <input type=submit name=websearch value="Search the Web" />
 </form>
 
 </tr>
 </table>


<table id="mt" cellspacing="0" cellpadding="0" width="100%" border="0">
 <tr>
 <th class="int1" onclick="if (!cancelBubble) _go('/p/gm-greader-unreadcount/');">
 <div class="tc1"><div class="tc2"><div class="tc3"></div></div></div>
 <div class="tT"><a onclick="cancelBubble=true;" href="/p/gm-greader-unreadcount/">Project&nbsp;Home</a></div>
 </th><td>&nbsp;&nbsp;</td>
 
 
 
 
 <th class="int2" onclick="if (!cancelBubble) _go('/p/gm-greader-unreadcount/downloads/list');">
 <div class="tc1"><div class="tc2"><div class="tc3"></div></div></div>
 <div class="tT"><a onclick="cancelBubble=true;" href="/p/gm-greader-unreadcount/downloads/list">Downloads</a></div>
 </th><td>&nbsp;&nbsp;</td>
 
 
 
 
 
 <th class="int6" onclick="if (!cancelBubble) _go('/p/gm-greader-unreadcount/w/list');">
 <div class="tc1"><div class="tc2"><div class="tc3"></div></div></div>
 <div class="tT"><a onclick="cancelBubble=true;" href="/p/gm-greader-unreadcount/w/list">Wiki</a></div>
 </th><td>&nbsp;&nbsp;</td>
 
 
 
 
 
 <th class="int3" onclick="if (!cancelBubble) _go('/p/gm-greader-unreadcount/issues/list');">
 <div class="tc1"><div class="tc2"><div class="tc3"></div></div></div>
 <div class="tT"><a onclick="cancelBubble=true;" href="/p/gm-greader-unreadcount/issues/list">Issues</a></div>
 </th><td>&nbsp;&nbsp;</td>
 
 
 
 
 
 <th class="int4" onclick="if (!cancelBubble) _go('/p/gm-greader-unreadcount/source/checkout');">
 <div class="tc1"><div class="tc2"><div class="tc3"></div></div></div>
 <div class="tT"><a onclick="cancelBubble=true;" href="/p/gm-greader-unreadcount/source/checkout">Source</a></div>
 </th><td>&nbsp;&nbsp;</td>
 
 
 <th class="int5" onclick="if (!cancelBubble) _go('/p/gm-greader-unreadcount/admin');">
 <div class="tc1"><div class="tc2"><div class="tc3"></div></div></div>
 <div class="tT"><a onclick="cancelBubble=true;" href="/p/gm-greader-unreadcount/admin">Administer</a></div>
 </th>
 <td width="100%">&nbsp;</td>
 </tr>
</table>
<table cellspacing="0" cellpadding="0" width="100%" align="center" border="0" class="st">
 <tr>
 
 
 
 
 
 
 <td>
 
<div class="st2">
 <div class="isf">
 <span class="inst1"><a href="/p/gm-greader-unreadcount/source/checkout">Checkout</a></span> |
 <span class="inst2"><a href="/p/gm-greader-unreadcount/source/browse">Browse</a></span> |
 <span class="inst3"><a href="/p/gm-greader-unreadcount/source/list">Changes</a></span> |
 <form action="http://www.google.com/codesearch" method="get" style="display:inline"
 onsubmit="document.getElementById('codesearchq').value = document.getElementById('origq').value + ' package:http://gm-greader-unreadcount\\.googlecode\\.com'">
 <input type="hidden" name="q" id="codesearchq" value="">
 <input maxlength="2048" size="35" id="origq" name="origq" value="" title="Google Code Search" style="font-size:92%">&nbsp;<input type="submit" value="Search Trunk" name="btnG" style="font-size:92%">
 </form>
 </div>
</div>


 </td>
 
 
 <td height=4 align=right style="padding:0px; vertical-align:top">
 <div class="stur"></div>
 </td>
 </tr>
</table>
<script>
 var cancelBubble = false;
 function _go(url) { document.location = url; }
</script>

<div id="maincol">
<!-- IE -->
<table align=center border=0 cellspacing=0 cellpadding=0 style="margin-bottom: 6px">
<tr><td class=notice>
<div class="rounded_ul"><div class="rounded_ur"><div class="rounded_ll"><div class="rounded_lr">


 
 
 
 

</div></div></div></div>
</td></tr>
</table>


<div class=expand>


<div id="nav_and_rev" class="heading">
 <div class="rounded_ul"><div class="rounded_ur">
 <div class="rounded_content" width="100%">
 <div class="">
 <div class="src_crumbs src_nav">
 <strong class="src_nav">Source Path:&nbsp;</strong>
 <span id="crumb_root">
 
 <a href="/p/gm-greader-unreadcount/source/browse/?r=2">svn</a>/&nbsp;</span>
 <span id="crumb_links" class="ifClosed"><a href="/p/gm-greader-unreadcount/source/browse/trunk/?r=2">trunk</a><span class="sp">/&nbsp;</span>googlereaderunreadcount.user.js</span>
 
 </div>
 
 </div>
 
 <div class="pagination" style="margin-left: 2em">
 
 <b>r2</b>
 
 </div>
 
 
 <div style="clear:both"></div>
 </div>
 </div></div>
</div>



<style type="text/css">
 
 #nums td:target a {color:black; font-weight:bold}
</style>
<div class=fc>
 


<table><tr>
<td id="nums">

<pre><table><tr id=gr_svn2_1><td id=1><a href=#1>1</a></td></tr><tr id=gr_svn2_2><td id=2><a href=#2>2</a></td></tr><tr id=gr_svn2_3><td id=3><a href=#3>3</a></td></tr><tr id=gr_svn2_4><td id=4><a href=#4>4</a></td></tr><tr id=gr_svn2_5><td id=5><a href=#5>5</a></td></tr><tr id=gr_svn2_6><td id=6><a href=#6>6</a></td></tr><tr id=gr_svn2_7><td id=7><a href=#7>7</a></td></tr><tr id=gr_svn2_8><td id=8><a href=#8>8</a></td></tr><tr id=gr_svn2_9><td id=9><a href=#9>9</a></td></tr><tr id=gr_svn2_10><td id=10><a href=#10>10</a></td></tr><tr id=gr_svn2_11><td id=11><a href=#11>11</a></td></tr><tr id=gr_svn2_12><td id=12><a href=#12>12</a></td></tr><tr id=gr_svn2_13><td id=13><a href=#13>13</a></td></tr><tr id=gr_svn2_14><td id=14><a href=#14>14</a></td></tr><tr id=gr_svn2_15><td id=15><a href=#15>15</a></td></tr><tr id=gr_svn2_16><td id=16><a href=#16>16</a></td></tr><tr id=gr_svn2_17><td id=17><a href=#17>17</a></td></tr><tr id=gr_svn2_18><td id=18><a href=#18>18</a></td></tr><tr id=gr_svn2_19><td id=19><a href=#19>19</a></td></tr><tr id=gr_svn2_20><td id=20><a href=#20>20</a></td></tr><tr id=gr_svn2_21><td id=21><a href=#21>21</a></td></tr><tr id=gr_svn2_22><td id=22><a href=#22>22</a></td></tr><tr id=gr_svn2_23><td id=23><a href=#23>23</a></td></tr><tr id=gr_svn2_24><td id=24><a href=#24>24</a></td></tr><tr id=gr_svn2_25><td id=25><a href=#25>25</a></td></tr><tr id=gr_svn2_26><td id=26><a href=#26>26</a></td></tr><tr id=gr_svn2_27><td id=27><a href=#27>27</a></td></tr><tr id=gr_svn2_28><td id=28><a href=#28>28</a></td></tr><tr id=gr_svn2_29><td id=29><a href=#29>29</a></td></tr><tr id=gr_svn2_30><td id=30><a href=#30>30</a></td></tr><tr id=gr_svn2_31><td id=31><a href=#31>31</a></td></tr><tr id=gr_svn2_32><td id=32><a href=#32>32</a></td></tr><tr id=gr_svn2_33><td id=33><a href=#33>33</a></td></tr><tr id=gr_svn2_34><td id=34><a href=#34>34</a></td></tr><tr id=gr_svn2_35><td id=35><a href=#35>35</a></td></tr><tr id=gr_svn2_36><td id=36><a href=#36>36</a></td></tr><tr id=gr_svn2_37><td id=37><a href=#37>37</a></td></tr><tr id=gr_svn2_38><td id=38><a href=#38>38</a></td></tr><tr id=gr_svn2_39><td id=39><a href=#39>39</a></td></tr><tr id=gr_svn2_40><td id=40><a href=#40>40</a></td></tr><tr id=gr_svn2_41><td id=41><a href=#41>41</a></td></tr><tr id=gr_svn2_42><td id=42><a href=#42>42</a></td></tr><tr id=gr_svn2_43><td id=43><a href=#43>43</a></td></tr><tr id=gr_svn2_44><td id=44><a href=#44>44</a></td></tr><tr id=gr_svn2_45><td id=45><a href=#45>45</a></td></tr><tr id=gr_svn2_46><td id=46><a href=#46>46</a></td></tr><tr id=gr_svn2_47><td id=47><a href=#47>47</a></td></tr><tr id=gr_svn2_48><td id=48><a href=#48>48</a></td></tr><tr id=gr_svn2_49><td id=49><a href=#49>49</a></td></tr><tr id=gr_svn2_50><td id=50><a href=#50>50</a></td></tr><tr id=gr_svn2_51><td id=51><a href=#51>51</a></td></tr><tr id=gr_svn2_52><td id=52><a href=#52>52</a></td></tr><tr id=gr_svn2_53><td id=53><a href=#53>53</a></td></tr><tr id=gr_svn2_54><td id=54><a href=#54>54</a></td></tr><tr id=gr_svn2_55><td id=55><a href=#55>55</a></td></tr><tr id=gr_svn2_56><td id=56><a href=#56>56</a></td></tr><tr id=gr_svn2_57><td id=57><a href=#57>57</a></td></tr><tr id=gr_svn2_58><td id=58><a href=#58>58</a></td></tr><tr id=gr_svn2_59><td id=59><a href=#59>59</a></td></tr><tr id=gr_svn2_60><td id=60><a href=#60>60</a></td></tr><tr id=gr_svn2_61><td id=61><a href=#61>61</a></td></tr><tr id=gr_svn2_62><td id=62><a href=#62>62</a></td></tr><tr id=gr_svn2_63><td id=63><a href=#63>63</a></td></tr><tr id=gr_svn2_64><td id=64><a href=#64>64</a></td></tr></table></pre>

</td>
<td id="lines">

<pre class="prettyprint"><table><tr id=sl_svn2_1><td>// ==UserScript==<br/></td></tr><tr id=sl_svn2_2><td>// @name        Google Reader Unread Count<br/></td></tr><tr id=sl_svn2_3><td>// @namespace   http://ellab.org/<br/></td></tr><tr id=sl_svn2_4><td>// @version     1.0<br/></td></tr><tr id=sl_svn2_5><td>// @description Display actual unread count instead of &quot;1000+&quot; in Google Reader<br/></td></tr><tr id=sl_svn2_6><td>// @include     http*://www.google.com/reader/*<br/></td></tr><tr id=sl_svn2_7><td>// ==/UserScript==<br/></td></tr><tr id=sl_svn2_8><td><br/></td></tr><tr id=sl_svn2_9><td>/*<br/></td></tr><tr id=sl_svn2_10><td>Author: Angus http://angusdev.mysinablog.com/<br/></td></tr><tr id=sl_svn2_11><td>Date:   2007-09-27<br/></td></tr><tr id=sl_svn2_12><td><br/></td></tr><tr id=sl_svn2_13><td>Version history:<br/></td></tr><tr id=sl_svn2_14><td>1.0    27-Sep-2007   First release to userscripts.org<br/></td></tr><tr id=sl_svn2_15><td>*/<br/></td></tr><tr id=sl_svn2_16><td><br/></td></tr><tr id=sl_svn2_17><td>function $(id){ return document.getElementById(id); }<br/></td></tr><tr id=sl_svn2_18><td><br/></td></tr><tr id=sl_svn2_19><td>function calcUnread() {<br/></td></tr><tr id=sl_svn2_20><td>  var countedUrl = new Array();<br/></td></tr><tr id=sl_svn2_21><td><br/></td></tr><tr id=sl_svn2_22><td>  var res = document.evaluate(&quot;//li[contains(@class, &#39;folder&#39;)]//li[contains(@class, &#39;folder&#39;)]&quot;, document, null, XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE, null);<br/></td></tr><tr id=sl_svn2_23><td>  var total = 0;<br/></td></tr><tr id=sl_svn2_24><td>  var totalplus = false;<br/></td></tr><tr id=sl_svn2_25><td>  for (var i=0;i&lt;res.snapshotLength;i++) {<br/></td></tr><tr id=sl_svn2_26><td>    var res2 = document.evaluate(&quot;.//li[contains(@class, &#39;unread&#39;)]/a/span/span[contains(@class, &#39;unread-count&#39;)]&quot;, res.snapshotItem(i), null, XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE, null);<br/></td></tr><tr id=sl_svn2_27><td>    var subtotal = 0;<br/></td></tr><tr id=sl_svn2_28><td>    var subtotalplus = false;<br/></td></tr><tr id=sl_svn2_29><td>    for (var j=0;j&lt;res2.snapshotLength;j++) {<br/></td></tr><tr id=sl_svn2_30><td>      var countres = res2.snapshotItem(j).innerHTML.match(/\((\d*)\+?\)/);<br/></td></tr><tr id=sl_svn2_31><td>      if (countres) {<br/></td></tr><tr id=sl_svn2_32><td>        var count = parseInt(countres[1], 10);<br/></td></tr><tr id=sl_svn2_33><td>        subtotal += count;<br/></td></tr><tr id=sl_svn2_34><td>        if (res2.snapshotItem(j).innerHTML.match(/\(100\+\)/)) {<br/></td></tr><tr id=sl_svn2_35><td>          subtotalplus = true;<br/></td></tr><tr id=sl_svn2_36><td>          totalplus = true;<br/></td></tr><tr id=sl_svn2_37><td>        }<br/></td></tr><tr id=sl_svn2_38><td>        if (countedUrl.indexOf(res2.snapshotItem(j).parentNode.parentNode.href) &lt; 0) {<br/></td></tr><tr id=sl_svn2_39><td>          total += count;<br/></td></tr><tr id=sl_svn2_40><td>          countedUrl[countedUrl.length] = res2.snapshotItem(j).parentNode.parentNode.href;<br/></td></tr><tr id=sl_svn2_41><td>        }<br/></td></tr><tr id=sl_svn2_42><td>      }<br/></td></tr><tr id=sl_svn2_43><td>    }<br/></td></tr><tr id=sl_svn2_44><td>    if (subtotal &gt; 0) {<br/></td></tr><tr id=sl_svn2_45><td>      var resfolder = document.evaluate(&quot;.//a/span/span[contains(@class, &#39;unread-count&#39;)]&quot;, res.snapshotItem(i), null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;<br/></td></tr><tr id=sl_svn2_46><td>      if (resfolder) {<br/></td></tr><tr id=sl_svn2_47><td>        resfolder.innerHTML = &#39;&amp;nbsp;(&#39; + subtotal + (subtotalplus?&#39;+&#39;:&#39;&#39;) + &#39;)&#39;;<br/></td></tr><tr id=sl_svn2_48><td>      }<br/></td></tr><tr id=sl_svn2_49><td>    }<br/></td></tr><tr id=sl_svn2_50><td>  }<br/></td></tr><tr id=sl_svn2_51><td>  if (total &gt; 0) {<br/></td></tr><tr id=sl_svn2_52><td>    $(&#39;reading-list-unread-count&#39;).innerHTML = &#39; (&#39; + total + (totalplus?&#39;+&#39;:&#39;&#39;) + &#39;)&#39;;<br/></td></tr><tr id=sl_svn2_53><td>  }<br/></td></tr><tr id=sl_svn2_54><td>}<br/></td></tr><tr id=sl_svn2_55><td><br/></td></tr><tr id=sl_svn2_56><td>if ($(&#39;reading-list-selector&#39;)) {<br/></td></tr><tr id=sl_svn2_57><td>  var a = document.createElement(&#39;A&#39;);<br/></td></tr><tr id=sl_svn2_58><td>  a.innerHTML = &quot;&lt;img src=&#39;/reader/ui/favicon.ico&#39; border=&#39;0&#39; style=&#39;vertical-align:bottom;&#39; /&gt;&quot;;<br/></td></tr><tr id=sl_svn2_59><td>  a.href = &#39;javascript:void(0)&#39;;<br/></td></tr><tr id=sl_svn2_60><td>  a.addEventListener(&quot;click&quot;, calcUnread, 0);<br/></td></tr><tr id=sl_svn2_61><td><br/></td></tr><tr id=sl_svn2_62><td>  $(&#39;reading-list-selector&#39;).appendChild(document.createTextNode(&#39; &#39;));<br/></td></tr><tr id=sl_svn2_63><td>  $(&#39;reading-list-selector&#39;).appendChild(a);<br/></td></tr><tr id=sl_svn2_64><td>}<br/></td></tr></table></pre>

</td>
</tr></table>



 <div id=log>
 <a style="float:right;" class=ifCollapse href="#" onclick="_toggleMeta('gm-greader-unreadcount', this)">Show details</a>
 
 <div class="ifExpand pmeta_bubble_bg" style="border:1px solid white"><div class="rounded_ul"><div class="rounded_ur"><div class="rounded_ll"><div class="rounded_lr">
 <div style="padding: 6px">
 <a style="float:right" class=ifExpand href="#" onclick="_toggleMeta('gm-greader-unreadcount', this)">Hide</a>
 <div id=changelog>
 <p>Change log</p>
 <div>
 <a href="/p/gm-greader-unreadcount/source/detail?r=2">r2</a> 
 by angusdev 
 on Oct 29, 2007
 &nbsp; <a href="/p/gm-greader-unreadcount/source/diff?r=2&amp;format=side&amp;path=/trunk/googlereaderunreadcount.user.js&amp;old_path=/trunk/googlereaderunreadcount.user.js&amp;old=0">Diff</a>
 </div>
 <pre>Initial import</pre>
 </div>
 <div id=older>
 <p>Older revisions</p>
 
 <a href="/p/gm-greader-unreadcount/source/list?path=/trunk/googlereaderunreadcount.user.js&start=2">All revisions of this file</a>
 </div>
 
 <div id=props>
 <p>File properties</p>
 <dl>
 
 <dt>svn:executable</dt>
 <dd>*</dd>
 
 </dl>
 </div>
 
 <div id=fileinfo>
 <p>File info</p>
 
 <div>Size: 2462 bytes, 
 64 lines</div>
 
 <div><a href="http://gm-greader-unreadcount.googlecode.com/svn/trunk/googlereaderunreadcount.user.js">View raw file</a></div>
 </div>
 </div>
 </div></div></div></div></div>
 </div>


</div>
</div>

 <script src="/hosting/js/prettify.js"></script><script>prettyPrint();</script>

<script src="/hosting/js/source_file_scripts_20080115.js"></script>

<script type="text/javascript" src="/hosting/js/dit_scripts_20080325.js"></script>

 
 
 
 </div>
<div id="footer" dir="ltr">
 
 <div class="text">
 
 &copy;2008 Google -
 <a href="/">Code Home</a> -
 <a href="/tos.html">Terms of Service</a> -
 <a href="http://www.google.com/privacy.html">Privacy Policy</a> -
 <a href="/more/">Site Directory</a>
 
 </div>
</div>
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script>
var siteTracker = _gat._getTracker("UA-18071-1");
siteTracker._initData();
siteTracker._trackPageview();

</script>

 
 


 </body>
</html>

